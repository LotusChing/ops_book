# HTTPS

> HTTPS: http over tls


## HTTP的问题

### 明文传输

![](/assets/http_pcap.png)


## HTTPS
### HTTPS的作用

* 加密数据
* 证明通信双方
* 校验数据完整性

## 对称加密
加密解密都是通过一个密钥，`DES` `AES`

* 优点：加解密速度快
* 缺点：密钥传输不安全


## 非对称加密
加密和解密通过不同的密钥，`RSA`

### 公钥
顾名思义，公钥可以公开给所有人

### 私钥
私钥通常都是不公开的，一般都是SA持有

通常来说，通过公钥加密数据的数据只有对应的私钥才能解开，反之通过私钥解密的数据也是只有公钥才能解开

## 小例子
![](/assets/https_basic.png)

解决掉的问题：
* `Client` -> `Server` 数据加密

还存在的问题：
1. 如何获取公钥
2. `Server` -> `Client` 数据泄密



## 证书、CA(问题1)

### 证书
可以理解为Server的身份证，这个身份证里面有很多信息，其中包括网站的公钥，当Client使用浏览器访问Server的时候，Server就会把证书返回给Client，浏览器从证书中取出公钥，然后就可以对要提交的数据进行加密了

> PS: 浏览器通常会内置大多数主流权威CA的根证书。

### CA
**证书颁发机构**(`Certificate authorities`)

* 只有少数的CA是权威的，被信任的，这些CA颁发的证书浏览器才能信认
* 自己也可以做CA

### 证书颁发
证书颁发的过程：
1. 服务器生成秘钥对
2. 服务器生成证书签名请求(csr)，并将密钥对塞进csr中，然后提交到CA
3. CA对服务器的csr进行确认，然后办法服务器的crt
4. 服务器配置使用CA办法的crt


## 数据单向传输安全(问题2)
HTTPS结合了对称加密来保证双向安全，流程大概是这个样子

![](/assets/https1.png)


## 如何破解HTTPS
在一定条件下HTTPS也是可以破解的(Charles)
缺图